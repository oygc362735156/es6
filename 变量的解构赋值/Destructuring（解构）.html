<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    // let [foo = true] = [];
    // foo // true
    //
    // // let [x, y = 'b'] = ['a']; // x='a', y='b'
    // let [x, y = 'b'] = ['a', undefined]; // x='a', y='b'
    // console.log(x);  //a
    // console.log(y);  //b
    // let [a, [b,c], d] = [1, [2, 3], 4];
    // a // 1
    // b // 2
    // d // 4
    // c // 3
    // console.log(a, b, c, d);

    // let [x = 1, y = x] = [];     // x = 1;y = 1
    // let [x = 1, y = x] = [2];    // x = 2;y = 2
    // let [x = 1, y = x] = [1, 2]; // x = 1;y = 2;
    // let [x = y, y = 1] = [];     // ReferenceError: y is not defined


    //对象的解构赋值的内部机制，是先找到同名属性，然后再赋给对应的变量。真正被赋值的是后者，而不是前者。
    // let { foo: baz } = { foo: 'aaa', bar: 'bbb' };
    // baz // "aaa"
    //
    // let obj = { first: 'hello', last: 'world' };
    // let { first: f, last: l } = obj;
    // f // 'hello'
    // l // 'world'


    //foo是匹配的模式，baz才是变量。真正被赋值的是变量baz，而不是模式foo。
    //     let { foo: baz } = { foo: "aaa", bar: "bbb" };
    //     baz // "aaa"
    //     foo // error: foo is not defined

    //解构也可以用于嵌套结构的对象。
    // let obj = {
    //     p: [
    //         'Hello',
    //         {y: 'World'}
    //     ]
    // };
    //
    // let {p: [x, {y: msd}]} = obj;
    //x = Hello
    // console.log(msd); // World
    // console.log(y); //y is not defined

    // let obj = {
    //     c: [
    //         'Hello',
    //         { y: 'World' }
    //     ]
    // };
    //
    // let { c, c: [x, { y }] } = obj;
    // console.log(x); //Hello
    // console.log(y); //World
    // console.log(c); //['Hello',{y:'World'}]


    //对loc、start、line三个属性的解构赋值。注意，最后一次对line属性的解构赋值之中，只有line是变量，loc和start都是模式，不是变量。
    // const node = {
    //     loc: {
    //         start: {
    //             line: 1,
    //             column: 5
    //         }
    //     }
    // };
    //
    // let { loc, loc: { start }, loc: { start: { line }} } = node;
    // console.log(loc);  //{start:{line:1,column:5}}
    // console.log(start); //{line:1,column:5}
    // console.log(line); // 1

    // let obj = {};
    // let arr = [];
    //
    // ({foo: obj.prop, bar: arr[0]} = {foo: 123, bar: true});
    // console.log(obj); //{prop:123}
    // console.log(arr); //true
    //console.log(foo); //foo is not defined

    //默认值生效的条件是，对象的属性值严格等于undefined。
    // var {x = 3} = {x: undefined};
    // x // 3
    //
    // var {x = 3} = {x: null};
    // x // null

    // let object = {
    //     people:"欧阳",
    //     age:"16",
    //     address:"徐州"
    // };
    //
    // [a,b,c] = [object.people,object.age,object.address];
    // console.log(a,b,c);


    //错误的写法
    // let x;
    // {x} = {x: 1};
    //上面代码的写法会报错，因为 JavaScript 引擎会将{x}理解成一个代码块，从而发生语法错误。只有不将大括号写在行首，避免 JavaScript 将其解释为代码块，才能解决这个问题。

    // 正确的写法
    // let x;
    // ({x} = {x: 1});

    // let { log, sin, cos } = Math;
    // console.log(sin);

    //模拟forEach：
    //
    // Array.prototype.forEach = function (fun, context) {
    //     var len = this.length; //array的length
    //     if (typeof fun !== "function") {
    //         throw "输入正确函数!";
    //     }
    //     for (var i = 0; i < len; i++) {
    //          fun( this[i], i, this);
    //     }
    // };
    // var arr = [5, 6, 7];
    // arr.forEach(function (item, index) {
    //      console.log(item, index);
    // });
    // [(b)] = [3]; // 正确
    // ({ p: (d) } = {p:3}); // 正确
    // [(parseInt.prop)] = [3]; // 正确
    // console.log(b);
    // console.log(d);
    // console.log(parseInt.prop);


    //用途
    //①交换变量的值
    // let a = 1;
    // let b = 2;
    // [a,b] = [b,a];
    // console.log(a); //2
    // console.log(b); //1


    //②返回一个数组
    // function example() {
    //     return [1, 2, 3];
    // }
    // let [a, b, c] = example();

    //③返回一个对象
    // function example() {
    //     return {
    //         foo: 1,
    //         bar: 2
    //     };
    // }
    // let { foo:a, bar:b } = example();
    // console.log(a);
    // console.log(b);


    // const map = new Map();
    // map.set('first', 'hello');
    // map.set('second', 'world');
    //
    // for (let [key, value] of map) {
    //     console.log(key + " is " + value);
    // }

    //火狐控制台打印输出： Object { fileNumber="文件编号", fileName="文件名称"}
    // console.log(map);
    const map = new Map();
    map.set("a","123");
    map.set("b","456");

    for (let [key,value] of map) {
        console.log("属性：" + key + ",值：" + value);
    }
</script>
</body>
</html>